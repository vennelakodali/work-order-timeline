<div
  class="work-order-bar"
  [style.left.px]="leftPx"
  [style.width.px]="widthPx"
  [class.hovered]="isHovered || actionsDropdown?.isOpen"
  [style.color]="config.textColor"
  [style.background]="config.bgColor"
  [style.borderColor]="config.borderColor"
  (mouseenter)="isHovered = true"
  (mouseleave)="onMouseLeave()"
>
  <!-- Work order name -->
  <span class="bar-name" [title]="order.data.name">{{ order.data.name }}</span>

  <!-- Status pill -->
  <app-pill
    [text]="pillConfig.label"
    [textColor]="pillConfig.textColor"
    [bgColor]="pillConfig.bgColor"
    [borderColor]="pillConfig.borderColor"
  />

  <!-- Three-dot actions menu (always rendered, visible on hover) -->
  <app-dropdown align="right" #actionsDropdown>
    <button trigger class="actions-btn" title="Actions">
      <svg width="14" height="14" viewBox="0 0 16 16" fill="currentColor">
        <circle cx="3" cy="8" r="1.5"/>
        <circle cx="8" cy="8" r="1.5"/>
        <circle cx="13" cy="8" r="1.5"/>
      </svg>
    </button>
    <div panel>
      <ul class="action-items-list">
        <li class="action-item" (click)="onEdit($event)">Edit</li>
        <li class="action-item delete" (click)="onDelete($event)">Delete</li>
      </ul>
    </div>
  </app-dropdown>

  <!-- Tooltip on hover -->
  <div class="bar-tooltip" *ngIf="isHovered && !actionsDropdown?.isOpen">
    <strong>{{ order.data.name }}</strong>
    <span>{{ order.data.status }}</span>
    <span>{{ order.data.startDate }} &mdash; {{ order.data.endDate }}</span>
  </div>
</div>

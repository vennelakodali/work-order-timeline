<div
  class="work-order-bar"
  [style.left.px]="leftPx"
  [style.width.px]="widthPx"
  [class.hovered]="isHovered || actionsDropdown?.isOpen"
  [style.color]="config.textColor"
  [style.background]="config.bgColor"
  [style.borderColor]="config.borderColor"
  (click)="onBarClick()"
  (mouseenter)="onMouseEnter()"
  (mouseleave)="onMouseLeave()"
>
  <!-- Work order name -->
  <span class="bar-name" [title]="order.data.name" [ngbTooltip]="barTooltip" container="body">{{ order.data.name }}</span>

  <!-- Status pill -->
  <app-pill
    [text]="pillConfig.label"
    [textColor]="pillConfig.textColor"
    [bgColor]="pillConfig.bgColor"
    [borderColor]="pillConfig.borderColor"
  />

  <!-- Three-dot actions menu (always rendered, visible on hover) -->
  <app-dropdown align="right" #actionsDropdown>
    <button trigger class="actions-btn" title="Actions">
      <img src="assets/icons/hover.svg" alt="Actions" class="actions-icon" />
    </button>
    <div panel>
      <ul class="action-items-list">
        <li class="action-item" (click)="onEdit($event)">Edit</li>
        <li class="action-item delete" (click)="onDelete($event)">Delete</li>
      </ul>
    </div>
  </app-dropdown>

  <ng-template #barTooltip>
    <div class="bar-tooltip" *ngIf="!actionsDropdown?.isOpen">
      <div><strong>{{ order.data.name }}</strong></div>
      <div>{{ order.data.status }}</div>
      <div>{{ order.data.startDate }} &mdash; {{ order.data.endDate }}</div>
    </div>
  </ng-template>
</div>

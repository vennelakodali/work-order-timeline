<div
  class="work-order-bar"
  [style.left.px]="barStyle.left"
  [style.width.px]="barStyle.width"
  [style.color]="config.textColor"
  [style.background]="config.bgColor"
  [style.borderColor]="config.borderColor"
  [ngbTooltip]="barTooltip"
  role="button"
  tabindex="0"
  [attr.aria-label]="'Work order: ' + order.data.name + ', Status: ' + order.data.status + ', ' + order.data.startDate + ' to ' + order.data.endDate"
>
  <span class="bar-name" [title]="order.data.name">{{ order.data.name }}</span>

  <app-pill
    *ngIf="barStyle.width > 100"
    [text]="pillConfig.label"
    [textColor]="pillConfig.textColor"
    [bgColor]="pillConfig.bgColor"
    [borderColor]="pillConfig.borderColor"
  />

  <app-dropdown align="right" [autoCloseOthers]="true" #actionsDropdown>
    <button trigger class="actions-btn" title="Actions" aria-label="Work order actions menu" aria-haspopup="true" [attr.aria-expanded]="actionsDropdown?.isOpen">
      <img src="assets/icons/hover.svg" alt="" class="actions-icon" aria-hidden="true" />
    </button>
    <div panel role="menu" aria-label="Work order actions">
      <ul class="action-items-list">
        <li class="action-item" (click)="onEdit($event)" role="menuitem" tabindex="0">Edit</li>
        <li class="action-item delete" (click)="onDelete($event)" role="menuitem" tabindex="0">Delete</li>
      </ul>
    </div>
  </app-dropdown>

  <ng-template #barTooltip>
    <div class="bar-tooltip" *ngIf="!actionsDropdown?.isOpen">
      <div><strong>{{ order.data.name }}</strong></div>
      <div>{{ order.data.status }}</div>
      <div>{{ order.data.startDate }} &mdash; {{ order.data.endDate }}</div>
    </div>
  </ng-template>
</div>
